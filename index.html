<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Quarter-Tone Synth (AudioWorklet • 24-TET)</title>
  <link rel="stylesheet" href="./styles/main.css" />
</head>
<body>
  <header>
    <h1>Quarter-Tone Synth (AudioWorklet • 24-TET)</h1>
    <div class="sub">PC keyboard plays a continuous run of quarter-steps starting at C4. Use <span class="kbd-inline">[</span>/<span class="kbd-inline">]</span> for octave −/+.</div>
    <button id="hardRefresh" class="pill refresh">Hard Refresh</button>
  </header>

  <div class="app">
    <div class="panel controls">
      <div class="section-title">Synthesis</div>
      <div class="row">
        <label>Volume</label>
        <input id="volume" type="range" min="0" max="1.0" step="0.01" value="0.8">
        <span class="pill"><span id="volumeVal">0.80</span></span>
      </div>
      <div class="row">
        <label for="waveform">Waveform</label>
        <select id="waveform">
          <option value="sine">Sine</option>
          <option value="square">Square</option>
          <option value="triangle">Triangle</option>
          <option value="sawtooth">Sawtooth</option>
        </select>
      </div>
      <div class="row">
        <label>Octave</label>
        <input id="octave" type="range" min="-2" max="3" step="1" value="0">
        <span class="pill"><span id="octaveVal">C4</span></span>
      </div>
      <div class="section-title">Envelope (ADSR)</div>
      <div class="row">
        <label>Attack</label>
        <input id="attack" type="range" min="0" max="2" step="0.001" value="0.010">
        <span class="pill"><span id="attackVal">0.010</span></span>s
      </div>
      <div class="row">
        <label>Decay</label>
        <input id="decay" type="range" min="0" max="2" step="0.001" value="0.100">
        <span class="pill"><span id="decayVal">0.100</span></span>s
      </div>
      <div class="row">
        <label>Sustain</label>
        <input id="sustain" type="range" min="0" max="1" step="0.01" value="0.70">
        <span class="pill"><span id="sustainVal">0.70</span></span>
      </div>
      <div class="row">
        <label>Release</label>
        <input id="release" type="range" min="0" max="5" step="0.01" value="0.50">
        <span class="pill"><span id="releaseVal">0.50</span></span>s
      </div>


      <div class="section-title">Legend</div>
      <div class="legend">
        <span class="pill"><span class="swatch sw-white"></span> Natural</span>
        <span class="pill"><span class="swatch sw-black"></span> Sharp ♯</span>
        <span class="pill"><span class="swatch sw-halfsharp"></span> Half-sharp ↑</span>
        <span class="pill"><span class="swatch sw-halfflat"></span> Half-flat ↓</span>
        <span class="pill"><span class="swatch sw-inactive"></span> Inactive (no note)</span>
      </div>

      <div class="section-title">PC Keyboard</div>
      <div class="row">
        <label for="enableKeyboard">Enable PC Keyboard</label>
        <input id="enableKeyboard" type="checkbox" checked>
      </div>
      <div class="sub" style="margin-top:5px;">Disable keyboard play if other menus not working correctly.</div>

      <div class="section-title">Octave Lock</div>
      <div class="row">
        <label for="enableKeyboard">Enable Octave Lock</label>
        <input id="lockOctave" type="checkbox" checked>
      </div>
      <div class="sub" style="margin-top:5px;">Prevent stray taps of octave change keys.</div>

      <!-- Oscilloscope removed -->
    </div>

    <div class="panel">
      <div class="section-title">Keyboard (click or use PC keys)</div>
      <div id="keyboard" class="keyboard"></div>
      <div class="sub" style="margin-top:10px">
        Tip: each key = +50 cents. Hold multiple keys for chords. Use <span class="kbd-inline">[</span>/<span class="kbd-inline">]</span> to shift octave (when octave lock is off).
      </div>
    </div>
  </div>

  <div class="footer">Built with Web Audio + AudioWorklet. No dependencies.</div>

  <script type="module" src="./scripts/main.js"></script>
</body>
</html>
